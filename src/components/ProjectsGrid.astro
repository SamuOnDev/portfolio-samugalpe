---
import { projects } from '../data/projects';
import { t, type ActiveLang } from '../i18n';

interface Props {
    lang: ActiveLang;
}

const { lang } = Astro.props as Props;
---

<section id="projects" class="relative bg-slate-950 pb-16 pt-6">
    <div
        aria-hidden="true"
        class="pointer-events-none absolute inset-x-0 top-0 h-24 bg-gradient-to-b from-white/5 via-indigo-500/5 to-transparent"
    />
    <div class="mx-auto max-w-content px-4">
        <div class="mb-8 flex flex-col gap-3 md:flex-row md:items-end md:justify-between">
        <div>
            <p class="text-[0.7rem] font-semibold uppercase tracking-[0.24em] text-slate-400">
            {t(lang, 'hero_kicker')}
            </p>
            <h2 class="text-2xl font-semibold tracking-tight text-slate-50">
            {t(lang, 'section_projects_title')}
            </h2>
            <p class="mt-1 text-sm text-slate-400">
            {t(lang, 'section_projects_subtitle')}
            </p>
        </div>
        <div class="text-[0.7rem] text-slate-400">
            {projects.length} proyectos · Astro / Tailwind / .NET / más
        </div>
        </div>

        <div class="grid gap-6 lg:grid-cols-2">
        {projects.map((p) => (
            <article
            class="group relative flex flex-col overflow-hidden rounded-3xl border border-slate-800 bg-slate-900/80 shadow-soft transition hover:-translate-y-1 hover:border-indigo-400/70 hover:shadow-glow"
            >
            <div
                aria-hidden="true"
                class="pointer-events-none absolute inset-0 opacity-0 transition duration-500 group-hover:opacity-100"
            >
                <div class="absolute inset-0 bg-gradient-to-br from-indigo-500/10 via-cyan-400/10 to-amber-400/10 blur-2xl" />
            </div>
            {/* “screenshot” placeholder */}
            <div class="relative h-40 overflow-hidden bg-slate-900">
                <div
                class="absolute inset-0 bg-[radial-gradient(circle_at_0_0,_#6366f1_0,_transparent_40%),_radial-gradient(circle_at_100%_0,_#22d3ee_0,_transparent_40%),_radial-gradient(circle_at_0_100%,_#f97316_0,_transparent_40%)] opacity-60 animate-shimmer bg-[length:220%_220%]"
                />
                <div class="absolute inset-x-3 bottom-3 flex items-center justify-between rounded-xl bg-slate-950/80 px-3 py-1.5 text-[0.7rem] text-slate-200 shadow-soft">
                <span class="truncate">
                    {p.tech.join(' · ')}
                </span>
                <span class="rounded-full bg-slate-800 px-2 py-0.5 text-[0.65rem] text-slate-300">
                    {p.year}
                </span>
                </div>
            </div>

            {/* contenido */}
            <div class="flex flex-1 flex-col gap-3 p-4">
                <div class="flex items-start justify-between gap-3">
                <div class="space-y-1">
                    <div class="text-sm font-semibold text-slate-50">
                    {p.name}
                    </div>
                    <div class="inline-flex items-center rounded-full bg-slate-800/80 px-2.5 py-0.5 text-[0.65rem] text-slate-200">
                    {p.type}
                    </div>
                </div>
                </div>

                <p class="text-xs text-slate-300">
                {p.description[lang]}
                </p>

                <div class="mt-auto flex items-center justify-between pt-1 text-[0.7rem] text-slate-400">
                <div class="flex flex-wrap gap-1">
                    {p.tech.slice(0, 3).map((tag) => (
                    <span class="rounded-full bg-slate-800 px-2 py-0.5">
                        {tag}
                    </span>
                    ))}
                </div>
                <div class="flex gap-3 text-[0.7rem]">
                    {p.liveUrl && (
                    <a
                        href={p.liveUrl}
                        target="_blank"
                        rel="noreferrer"
                        class="text-indigo-300 hover:text-indigo-100"
                    >
                        Ver web
                    </a>
                    )}
                    {p.codeUrl && (
                    <a
                        href={p.codeUrl}
                        target="_blank"
                        rel="noreferrer"
                        class="text-slate-300 hover:text-slate-100"
                    >
                        Código
                    </a>
                    )}
                </div>
                </div>
            </div>
            </article>
        ))}
        </div>
    </div>
</section>
