---
import LanguageSwitcher from './LanguageSwitcher.astro';
import { t, DEFAULT_LANG, type ActiveLang } from '../i18n';

interface Props {
    lang?: ActiveLang;
    path?: string;
}

const { lang: explicitLang, path = '/' } = Astro.props as Props;
const lang = explicitLang ?? ((Astro.params.lang as ActiveLang | undefined) ?? DEFAULT_LANG);

const LINKS: Array<{ key: string; href: string }> = [
    { key: 'nav_projects', href: `#projects` },
    { key: 'nav_about', href: `#about` },
    { key: 'nav_stack', href: `#stack` },
    { key: 'nav_contact', href: `#contact` }
];
---

<header
    class="sticky top-0 z-40 border-b border-brand-royal/50 bg-brand-ink/80 backdrop-blur-xl"
    >
    <div class="mx-auto flex max-w-content items-center justify-between px-4 py-5">
        <a href={`/${lang}/`} class="flex items-center gap-3">
            <div class="flex flex-col text-sm md:text-base">
                <span class="text-lg leading-tight tracking-wide text-brand-gold md:text-xl">
                    <span class="font-normal">Samuel</span> <span class="font-semibold">Galpe</span>
                </span>
                <span class="text-[0.7rem] text-slate-400 md:text-xs">
                    Full-Stack Web Developer
                </span>
            </div>
            <div
                class="flex h-8 w-8 items-center justify-center rounded-full bg-gradient-to-br from-brand-gold to-brand-royal text-[0.7rem] font-semibold text-brand-ink shadow-glow"
            >
                SG
            </div>
        </a>

        <nav class="hidden gap-6 text-sm font-semibold text-slate-300 md:flex md:text-base">
        {LINKS.map((link) => (
            <a
                href={link.href}
                class="group relative pb-0.5 text-slate-300 transition-all duration-300 ease-out hover:-translate-y-0.5 hover:text-white"
            >
                {t(lang, link.key)}
                <span
                    class="absolute inset-x-0 -bottom-0.5 h-[2px] origin-left scale-x-0 bg-gradient-to-r from-brand-gold to-brand-royal transition-transform group-hover:scale-x-100 group-hover:drop-shadow-[0_0_12px_rgba(251,191,36,0.45)]"
                />
            </a>
        ))}
        </nav>

        <div class="flex items-center gap-4">
        <LanguageSwitcher lang={lang} path={path} />
        </div>
    </div>
</header>
